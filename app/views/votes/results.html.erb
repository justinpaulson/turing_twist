<h2 style="text-align: center; margin-bottom: 2rem; text-transform: uppercase;">Voting Results - Round <%= @round.round_number %></h2>

<div class="box" style="padding: 2rem; margin-bottom: 2rem;">
  <div class="box-header" style="margin-bottom: 1.5rem;">
    ► VOTES CAST
  </div>
  <div style="display: grid; gap: 0.75rem;">
    <% @votes.each do |vote| %>
      <div style="font-family: 'Courier New', monospace; padding: 0.75rem; background: #ffffff; border: 2px solid #000000; display: flex; align-items: center; gap: 1rem;">
        <div style="width: 30px; height: 30px; background: #000000; border: 2px solid #000000; display: flex; align-items: center; justify-content: center; padding: 0.25rem;">
          <%= image_tag vote.voter.character_avatar_path, style: "width: 100%; height: 100%; object-fit: contain;" %>
        </div>
        <div style="flex: 1;">
          <strong><%= vote.voter.character_name %></strong> voted for <strong><%= vote.voted_for.character_name %></strong>
        </div>
      </div>
    <% end %>
  </div>

</div>

<div style="text-align: center; margin-top: 2rem;">
  <% if @game.completed? %>
    <%= link_to "VIEW FINAL RESULTS ►", game_path(@game), class: "btn", style: "font-size: 1.3rem; padding: 1.5rem 3rem;" %>
  <% else %>
    <% next_round = @game.current_round_object %>
    <% if next_round %>
      <%= link_to "CONTINUE TO NEXT ROUND ►", game_round_path(@game, next_round), class: "btn", style: "font-size: 1.3rem; padding: 1.5rem 3rem;" %>
    <% else %>
      <div class="box" style="padding: 2rem; font-family: 'Courier New', monospace; font-size: 1.1rem;">
        ⏳ PREPARING NEXT ROUND...
      </div>
      <script>
        setTimeout(function() {
          window.location.href = '<%= game_path(@game) %>';
        }, 2000);
      </script>
    <% end %>
  <% end %>
</div>
